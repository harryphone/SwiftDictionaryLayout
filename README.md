# æ¢ç´¢Swiftä¸­Dictionaryçš„åº•å±‚å®ç°åŠåŸç†

# å‰è¨€

`swift`å­—å…¸çš„è®¾è®¡æ€è·¯å’Œæ•°ç»„è¿˜æ˜¯æœ‰ç‚¹åƒçš„ï¼Œå¯ä»¥å‚è€ƒæˆ‘å‰é¢å†™çš„[æ•°ç»„](https://juejin.cn/post/6931236309176418311)ç¯‡ï¼Œå› ä¸ºè¿™é‡Œä¼šè®²swiftå­—å…¸ç”¨åˆ°çš„`hash`åŸç†ï¼Œç¯‡å¹…æœ‰é™ï¼Œå°†ä¼šå¼±åŒ–æºç çš„é˜…è¯»ã€‚

# `Dictionary`çš„å†…å­˜æ¢ç´¢

æ—¢ç„¶å’Œ`Array`è®¾è®¡æ€è·¯ç›¸ä¼¼ï¼Œæˆ‘ä»¬çœ‹ä¸‹`Dictionary`çš„å†…å­˜ä¸­æ”¾äº†äº›ä»€ä¹ˆï¼Ÿ

è¿è¡Œå¦‚ä¸‹ä»£ç ï¼Œåœ¨`print`å¤„æ‰“ä¸‹æ–­ç‚¹çœ‹ä¸‹ï¼š
```swift
var dic = ["1": "Dog", "2": "Car", "3": "Apple", "4": "Cat"]
withUnsafePointer(to: &dic) {
    print($0)
}
print("end")
```

æ–­ç‚¹è°ƒè¯•åå¯ä»¥çœ‹åˆ°ï¼š
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be012cd77220408fb5c0092b6b20aca5~tplv-k3u1fbpfcp-watermark.image)
`Dictionary`å­˜çš„è²Œä¼¼æ˜¯ä¸ªå †ä¸Šçš„åœ°å€`0x000000010053eb40`ï¼ŒæŸ¥çœ‹è¯¥åœ°å€åï¼Œå‘ç°æœç„¶å’Œ`Array`ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªç±»ç»“æ„[HeapObject](https://juejin.cn/post/6905708198796361736)ã€‚ä½†å…¶ä»–é™¤äº†ä¸€ä¸ª`4`è²Œä¼¼æ˜¯å­—å…¸ä¸ªæ•°ï¼Œå­—å…¸çš„`key`å’Œ`value`ä¸€ä¸ªéƒ½æ²¡æœ‰æ‰¾åˆ°ã€‚

æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹`key`å’Œ`value`å­˜åœ¨å“ªé‡Œï¼Ÿä»¥åŠåœ¨`swift`ä¸­å­—å…¸çš„åº•å±‚åŸç†

# `Dictionary`ç»“æ„
```swift
public struct Dictionary<Key: Hashable, Value> {
    /// The element type of a dictionary: a tuple containing an individual
    /// key-value pair.
    public typealias Element = (key: Key, value: Value)
    
    @usableFromInline
    internal var _variant: _Variant
    
    @inlinable
    internal init(_native: __owned _NativeDictionary<Key, Value>) {
        _variant = _Variant(native: _native)
    }
    
    #if _runtime(_ObjC)
    @inlinable
    internal init(_cocoa: __owned __CocoaDictionary) {
        _variant = _Variant(cocoa: _cocoa)
    }
    ...
}
```

æºç ä¸­`Dictionary`åªæœ‰ä¸€ä¸ªå±æ€§`_variant`ï¼Œä»–æ˜¯`_Variant`ç±»å‹çš„ï¼Œç»§ç»­çœ‹ä¸‹`_Variant`ç±»å‹çš„å±æ€§ï¼š
```swift
@usableFromInline
    internal var object: _BridgeStorage<__RawDictionaryStorage>
```
ä¹Ÿåªæœ‰ä¸€ä¸ªï¼Œç±»å‹`_BridgeStorage`çš„åˆå§‹åŒ–å°±æ˜¯ä¸€ä¸ªå¼ºè½¬èµ‹å€¼ï¼Œè¿™ä¸ªå’Œ`Array`é‚£ä¸€æ ·ï¼Œæ‰€ä»¥å¾—çœ‹ä¼ è¿›æ¥ä»€ä¹ˆä¸œè¥¿ã€‚æˆ‘ä»¬å›å¤´çœ‹`Dictionary`çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨çš„æ˜¯`swift`åŸç”Ÿçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹ˆä¼šèµ°`init(_native: __owned _NativeDictionary<Key, Value>)`æ–¹æ³•ï¼Œé‚£ä¹ˆä¼ ç»™`_Variant`çš„å°±æ˜¯`_NativeDictionary`ï¼Œæ‰€ä»¥`swift`çš„`Dictionary`å°±æ˜¯`_NativeDictionary`ï¼ˆåŒç†ï¼Œæºç ä¸­çœ‹åˆ°ï¼Œå¦‚æœæ˜¯OCçš„å­—å…¸ä¼šå˜æˆ`__CocoaDictionary`ï¼Œæˆ‘ä»¬è¿™åªæ¢ç´¢`swift`çš„ï¼‰

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹`_NativeDictionary`çš„æºç ä¸­å®šä¹‰ï¼š
```swift
internal struct _NativeDictionary<Key: Hashable, Value> {
    @usableFromInline
    internal typealias Element = (key: Key, value: Value)
    
    /// See this comments on __RawDictionaryStorage and its subclasses to
    /// understand why we store an untyped storage here.
    @usableFromInline
    internal var _storage: __RawDictionaryStorage
    
    /// Constructs an instance from the empty singleton.
    @inlinable
    internal init() {
        self._storage = __RawDictionaryStorage.empty
    }
    
    /// Constructs a dictionary adopting the given storage.
    @inlinable
    internal init(_ storage: __owned __RawDictionaryStorage) {
        self._storage = storage
    }
    
    @inlinable
    internal init(capacity: Int) {
        if capacity == 0 {
            self._storage = __RawDictionaryStorage.empty
        } else {
            self._storage = _DictionaryStorage<Key, Value>.allocate(capacity: capacity)
        }
    }
    ...
}
```
`_NativeDictionary`ä¹Ÿæ˜¯ä¸€ä¸ªå±æ€§`_storage`ï¼Œ`__RawDictionaryStorage`ç±»å‹çš„ï¼Œä¼°è®¡ä½ ä¹ŸçŒœåˆ°äº†ï¼Œ`__RawDictionaryStorage`æ˜¯ç±»ç±»å‹çš„ã€‚

æˆ‘ä»¬æ‰¾ä¸‹`__RawDictionaryStorage`çš„å®šä¹‰ï¼š
```swift
@_fixed_layout
@usableFromInline
@_objc_non_lazy_realization
internal class __RawDictionaryStorage: __SwiftNativeNSDictionary {
  // NOTE: The precise layout of this type is relied on in the runtime to
  // provide a statically allocated empty singleton.  See
  // stdlib/public/stubs/GlobalObjects.cpp for details.

  /// The current number of occupied entries in this dictionary.
  @usableFromInline
  @nonobjc
  internal final var _count: Int

  /// The maximum number of elements that can be inserted into this set without
  /// exceeding the hash table's maximum load factor.
  @usableFromInline
  @nonobjc
  internal final var _capacity: Int

  /// The scale of this dictionary. The number of buckets is 2 raised to the
  /// power of `scale`.
  @usableFromInline
  @nonobjc
  internal final var _scale: Int8

  /// The scale corresponding to the highest `reserveCapacity(_:)` call so far,
  /// or 0 if there were none. This may be used later to allow removals to
  /// resize storage.
  ///
  /// FIXME: <rdar://problem/18114559> Shrink storage on deletion
  @usableFromInline
  @nonobjc
  internal final var _reservedScale: Int8

  // Currently unused, set to zero.
  @nonobjc
  internal final var _extra: Int16

  /// A mutation count, enabling stricter index validation.
  @usableFromInline
  @nonobjc
  internal final var _age: Int32

  /// The hash seed used to hash elements in this dictionary instance.
  @usableFromInline
  internal final var _seed: Int

  /// A raw pointer to the start of the tail-allocated hash buffer holding keys.
  @usableFromInline
  @nonobjc
  internal final var _rawKeys: UnsafeMutableRawPointer

  /// A raw pointer to the start of the tail-allocated hash buffer holding
  /// values.
  @usableFromInline
  @nonobjc
  internal final var _rawValues: UnsafeMutableRawPointer
  
  ...
}
```
`__RawDictionaryStorage`çš„çˆ¶ç±»æ²¡æœ‰å±æ€§ï¼Œæ‰€ä»¥æ•´ä¸ª`__RawDictionaryStorage`çš„å±æ€§å°±è¿™ä¹ˆå¤šäº†ã€‚è¿™æ ·æˆ‘ä»¬æŠŠ`Dictionary`çš„å±æ€§å¤§æ¦‚å¼„æ¸…æ¥šäº†
![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/384cb61dab274776aa4edb4a20b9b325~tplv-k3u1fbpfcp-watermark.image)

# `rawKeys`ä¸`rawValues`

æˆ‘ä»¬å¾ˆå¿«èƒ½å‘ç°æˆ‘ä»¬æ‰€éœ€è¦çš„`keys`å’Œ`values`ï¼Œä½†ä»–ä»¬å®šä¹‰çš„éƒ½æ˜¯æŒ‡é’ˆï¼Œéš¾é“æ‹¿åˆ°æŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€ï¼Œå°±èƒ½æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¹ˆï¼Ÿ

æˆ‘ä»¬çœ‹ä¸‹å†…å­˜ï¼š
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3da8a83f3df346dd8395fbebca04f793~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬æ‰“å°çš„å¤§ä¸€ç‚¹ï¼Œå‘ç°çš„ç¡®æœ‰ï¼Œ`31`ã€`32`ã€`33`ã€`34`è¡¨ç¤ºçš„å°±æ˜¯å­—ç¬¦ä¸²`1`ã€`2`ã€`3`ã€`4`ï¼Œä½†ä¼¼ä¹å’Œæˆ‘ä»¬æƒ³è±¡ä¸­çš„ä¸ä¸€æ ·ï¼Œä»–ä»¬å¹¶æ²¡æœ‰ç´§æŒ¨ç€é ç€èµ·å§‹ä½ç½®ï¼Œé¡ºåºä¹Ÿæ˜¯ä¹±çš„ã€‚è¦è§£é‡Šè¿™ä¸ªï¼Œä¸å¾—ä¸è¯´`Dictionary`çš„å®ç°åŸç†å“ˆå¸Œè¡¨ã€‚

# å“ˆå¸Œè¡¨ç®—æ³•é€šä¿—ç†è§£

è¿™æ®µå®Œå…¨æ‘˜è‡ªåˆ«äººçš„[ç¨¿å­](https://blog.csdn.net/u013752202/article/details/51104156)ï¼Œå› ä¸ºçœŸå¾—å¾ˆé€šä¿—ï¼ˆå·ä¸ªæ‡’ï¼‰ã€‚

## é¡ºåºæŸ¥è¡¨æ³•

å‡è®¾ç°åœ¨æœ‰1000ä¸ªäººçš„æ¡£æ¡ˆèµ„æ–™éœ€è¦å­˜æ”¾è¿›æ¡£æ¡ˆæŸœå­é‡Œã€‚è¦æ±‚æ˜¯èƒ½å¤Ÿå¿«é€ŸæŸ¥è¯¢åˆ°æŸäººæ¡£æ¡ˆæ˜¯å¦å·²ç»å­˜æ¡£ï¼Œå¦‚æœå·²ç»å­˜æ¡£åˆ™èƒ½å¿«é€Ÿè°ƒå‡ºæ¡£æ¡ˆã€‚å¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿæœ€æ™®é€šçš„åšæ³•å°±æ˜¯æŠŠæ¯ä¸ªäººçš„æ¡£æ¡ˆä¾æ¬¡æ”¾åˆ°æŸœå­é‡Œï¼Œç„¶åæŸœå­å¤–é¢è´´ä¸Šäººåï¼Œéœ€è¦æŸ¥è¯¢æŸä¸ªäººçš„æ¡£æ¡ˆçš„æ—¶å€™å°±æ ¹æ®è¿™ä¸ªäººçš„å§“åæ¥ç¡®å®šæ˜¯å¦å·²ç»å­˜æ¡£ã€‚ä½†æ˜¯1000ä¸ªäººæœ€åçš„æƒ…å†µä¸‹æˆ‘ä»¬æŸ¥æ‰¾ä¸€ä¸ªäººçš„å§“åå°±è¦å¯¹æ¯”1000æ¬¡ï¼å¹¶ä¸”äººè¶Šå¤šï¼Œæœ€å¤§æŸ¥è¯¢çš„æ¬¡æ•°ä¹Ÿå°±è¶Šå¤šï¼Œä¸“ä¸šçš„è¯´è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚çš„å°±æ˜¯O(n)ï¼Œæ„æ€å°±æ˜¯äººæ•°å¢åŠ nå€ï¼Œé‚£ä¹ˆæŸ¥è¯¢çš„æœ€å¤§æ¬¡æ•°ä¹Ÿå°±ä¼šå¢åŠ nå€ï¼è¿™ç§æ–¹æ³•ï¼Œäººæ•°å°‘çš„æ—¶å€™è¿˜å¥½ï¼Œäººæ•°è¶Šå¤šæŸ¥è¯¢èµ·æ¥å°±è¶Šè´¹åŠ²ï¼é‚£ä¹ˆæœ‰ä»€ä¹ˆæ›´å¥½çš„è§£å†³æ–¹æ³•å—ï¼Ÿç­”æ¡ˆå°±æ˜¯æ•£åˆ—è¡¨ç®—æ³•ï¼Œå³å“ˆå¸Œè¡¨ç®—æ³•ã€‚

## å“ˆå¸Œè¡¨ç®—æ³•

å‡è®¾æ¯ä¸ªäººçš„å§“åç¬”åˆ’æ•°éƒ½æ˜¯ä¸é‡å¤çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå‡½æ•°æŠŠè¦å­˜æ¡£çš„äººå§“åç¬”åˆ’æ•°è½¬æ¢åˆ°1000ä»¥å†…ï¼Œç„¶åæŠŠè¿™ä¸ªäººçš„èµ„æ–™å°±æ”¾åœ¨è½¬æ¢åçš„æ•°å­—æŒ‡å®šçš„æŸœå­é‡Œï¼Œè¿™ä¸ªå‡½æ•°å°±å«åšå“ˆå¸Œå‡½æ•°ï¼ŒæŒ‰ç…§è¿™ç§æ–¹å¼å­˜æ”¾çš„è¿™1000ä¸ªæŸœå­å°±å«å“ˆç³»è¡¨(æ•£åˆ—è¡¨)ï¼Œäººåç¬”ç”»æ•°å°±æ˜¯å“ˆç³»è¡¨çš„å…ƒç´ ï¼Œè½¬æ¢åçš„æ•°å°±æ˜¯äººåç¬”åˆ’æ•°çš„å“ˆå¸Œå€¼(ä¹Ÿå°±æ˜¯æŸœå­çš„åºå·)ã€‚å½“è¦æŸ¥è¯¢æŸä¸ªäººæ˜¯å¦å·²ç»å­˜æ¡£çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±é€šè¿‡å“ˆå¸Œå‡½æ•°æŠŠä»–çš„å§“åç¬”åˆ’æ•°è½¬åŒ–æˆå“ˆå¸Œå€¼ï¼Œå¦‚æœå“ˆå¸Œå€¼åœ¨1000ä»¥å†…ï¼Œé‚£ä¹ˆæ­å–œä½ è¿™ä¸ªäººå·²ç»å­˜æ¡£ï¼Œå¯ä»¥åˆ°å“ˆå¸Œå€¼æŒ‡å®šçš„æŸœå­é‡Œå»è°ƒå‡ºä»–çš„æ¡£æ¡ˆï¼Œå¦åˆ™è¿™ä¸ªäººå°±æ˜¯é»‘æˆ·ï¼Œæ²¡æœ‰å­˜æ¡£ï¼è¿™å°±æ˜¯å“ˆå¸Œè¡¨ç®—æ³•äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œåªè¦é€šè¿‡ä¸€æ¬¡è®¡ç®—å¾—å‡ºå“ˆå¸Œå€¼å°±å¯ä»¥æŸ¥è¯¢åˆ°ç»“æœäº†ï¼Œä¸“ä¸šçš„è¯´æ³•å°±æ˜¯è¿™ç§ç®—æ³•çš„æ—¶é—´å¤æ‚æ˜¯O(1)ï¼Œå³æ— è®ºæœ‰å¤šå°‘äººå­˜æ¡£ï¼Œéƒ½å¯ä»¥é€šè¿‡ä¸€æ¬¡è®¡ç®—å¾—å‡ºæŸ¥è¯¢ç»“æœï¼

å½“ç„¶ä¸Šé¢çš„åªæ˜¯å¾ˆç†æƒ³çš„æƒ…å†µï¼Œäººåçš„ç¬”åˆ’æ•°æ˜¯ä¸å¯èƒ½ä¸é‡å¤çš„ï¼Œè½¬æ¢è€Œæ¥çš„å“ˆå¸Œå€¼ä¹Ÿä¸ä¼šæ˜¯å”¯ä¸€çš„ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿå¦‚æœä¸¤ä¸ªäººç®—å‡ºçš„å“ˆå¸Œå€¼æ˜¯ä¸€æ ·çš„ï¼Œéš¾é“æŠŠä»–ä»¬éƒ½æ”¾åˆ°ä¸€ä¸ªæŸœå­é‡Œé¢ï¼Ÿå¦‚æœ1000ä¸ªäººå¾—å‡ºçš„å“ˆå¸Œå€¼éƒ½æ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿä¸‹é¢æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ç§å†²çªã€‚ 

## å¼€æ”¾åœ°å€æ³•

è¿™ç§æ–¹æ³•çš„åšæ³•æ˜¯ï¼Œå¦‚æœè®¡ç®—å¾—å‡ºçš„å“ˆå¸Œå€¼å¯¹åº”çš„æŸœå­é‡Œé¢å·²ç»æ”¾äº†åˆ«äººçš„æ¡£æ¡ˆï¼Œé‚£ä¹ˆå¯¹ä¸èµ·ï¼Œä½ å¾—å†æ¬¡é€šè¿‡å“ˆå¸Œç®—æ³•æŠŠè¿™ä¸ªå“ˆå¸Œå€¼å†æ¬¡å˜æ¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºçš„æŸœå­ä¸ºæ­¢ï¼æŸ¥è¯¢çš„æ—¶å€™ä¹Ÿä¸€æ ·ï¼Œé¦–å…ˆåˆ°ç¬¬ä¸€æ¬¡è®¡ç®—å¾—å‡ºçš„å“ˆå¸Œå€¼å¯¹åº”çš„æŸœå­é‡Œé¢çœ‹çœ‹æ˜¯ä¸æ˜¯ä½ è¦æ‰¾çš„æ¡£æ¡ˆï¼Œå¦‚æœä¸æ˜¯ç»§ç»­æŠŠè¿™ä¸ªå“ˆå¸Œå€¼é€šè¿‡å“ˆå¸Œå‡½æ•°å˜æ¢ï¼Œç›´åˆ°æ‰¾åˆ°ä½ è¦çš„æ¡£æ¡ˆï¼Œå¦‚æœæ‰¾äº†å‡ æ¬¡éƒ½æ²¡æ‰¾åˆ°è€Œä¸”å“ˆå¸Œå€¼å¯¹åº”çš„æŸœå­é‡Œé¢æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå¯¹ä¸èµ·ï¼ŒæŸ¥æ— æ­¤äººï¼

## æ‹‰é“¾æ³•(é“¾åœ°å€æ³•)

è¿™ç§æ–¹æ³•çš„åšæ³•æ˜¯ï¼Œå¦‚æœè®¡ç®—å¾—å‡ºçš„å“ˆå¸Œå€¼å¯¹åº”çš„æŸœå­é‡Œé¢å·²ç»æ”¾äº†åˆ«äººçš„æ¡£æ¡ˆï¼Œé‚£ä¹Ÿä¸ç®¡äº†ï¼Œæ‡’å¾—å†æ‰¾å…¶ä»–æŸœå­äº†ï¼Œå°±è·Ÿä»–çš„æ¡£æ¡ˆæ”¾åœ¨ä¸€èµ·ï¼å½“ç„¶æ˜¯æŒ‰é¡ºåºæ¥å­˜æ”¾ã€‚è¿™æ ·ä¸‹æ¬¡æ¥æ‰¾çš„æ—¶å€™ä¸€ä¸ªå“ˆå¸Œå€¼å¯¹åº”çš„æŸœå­é‡Œé¢å¯èƒ½æœ‰å¾ˆå¤šäººçš„æ¡£æ¡ˆï¼Œæœ€å·®çš„æƒ…å†µå¯èƒ½1000ä¸ªäººçš„æ¡£æ¡ˆéƒ½åœ¨ä¸€ä¸ªæŸœå­é‡Œé¢ï¼é‚£ä¹ˆæ—¶é—´å¤æ‚åº¦åˆæ˜¯O(n)äº†ï¼Œè·Ÿæ™®é€šçš„åšæ³•ä¹Ÿæ²¡å•¥åŒºåˆ«äº†ã€‚åœ¨ç®—æ³•å®ç°çš„æ—¶å€™ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ å­˜æ”¾çš„ä¸æ˜¯å†…å®¹è€Œæ˜¯é“¾è¡¨å¤´ï¼Œå¦‚æœå“ˆå¸Œå€¼å”¯ä¸€ï¼Œé‚£ä¹ˆé“¾è¡¨å¤§å°ä¸º1ï¼Œå¦åˆ™é“¾è¡¨å¤§å°ä¸ºé‡å¤çš„å“ˆå¸Œå€¼ä¸ªæ•°ã€‚

# å“ˆå¸Œè¡¨ç®—æ³•è®¡ç®—æœºä¸­çš„ç†è§£

å“ˆå¸Œè¡¨ï¼ˆHash tableï¼Œä¹Ÿå«æ•£åˆ—è¡¨ï¼‰ï¼Œæ˜¯æ ¹æ®å…³é”®ç å€¼(Key value)è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åšæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å«åšæ•£åˆ—è¡¨ã€‚

## æ•£åˆ—å‡½æ•°

æ•£åˆ—å‡½æ•°æ˜¯ä¸€ç§å‡½æ•°ï¼ˆåƒ`y=f(x)`ï¼‰ï¼Œç»å…¸çš„æ•£åˆ—å‡½æ•°æœ‰ä»¥ä¸‹ç‰¹æ€§:
* è¾“å…¥åŸŸæ˜¯æ— ç©·å¤§çš„
* è¾“å‡ºåŸŸæ˜¯æœ‰ç©·å°½çš„
* è¾“å…¥ç›¸åŒï¼Œå¾—åˆ°çš„è¾“å‡ºä¹Ÿç›¸åŒ
* å› ä¸ºè¾“å…¥åŸŸæ˜¯è¿œè¿œå¤§äºè¾“å‡ºåŸŸçš„ï¼Œé‚£ä¹ˆä¸€å®šä¼šå‡ºç°ä¸åŒçš„è¾“å‡ºï¼Œå´å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œè¿™ä¸ªå«å“ˆå¸Œç¢°æ’
* æ»¡å°„æ€§ï¼šç»“æœå°½å¯èƒ½å……åˆ†è¦†ç›–æ•´ä¸ªè¾“å‡ºåŸŸ
* æœ€é‡è¦çš„ä¸€ç‚¹ï¼šç¦»æ•£æ€§ï¼Œå¦‚æœä½ çš„æ ·æœ¬æ•°é‡è¶³å¤Ÿå¤§ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ç»“æœåœ¨è¾“å‡ºåŸŸä¸Šå‡ ä¹æ˜¯å‡åŒ€åˆ†å¸ƒçš„

å¸¸ç”¨çš„æ•£åˆ—å‡½æ•°æœ‰ï¼šç›´æ¥å®šå€æ³•ã€æ±‚ä½™æ³•ã€æ•°å­—åˆ†ææ³•ã€å¹³æ–¹å–ä¸­æ³•ã€æŠ˜å æ³•ã€éšæœºæ•°æ³•ç­‰ï¼Œè¿™äº›æ–¹æ³•ç®€å•çš„è®²ä¸¤ä¸ªï¼š

* æ±‚ä½™æ³•ï¼š
Hash(key)=key%Mï¼ŒMé€šå¸¸æ˜¯æ•£åˆ—è¡¨è§„æ¨¡ï¼ŒMå°½å¯èƒ½ç”¨ç´ æ•°ï¼Œå› ä¸ºå¦‚æœï¼Œkeyéƒ½æ˜¯10çš„å€æ•°ï¼Œè€ŒMæ˜¯10ï¼Œé‚£å²‚ä¸æ˜¯éƒ½åœ¨0ä¸Šäº†ã€‚ã€‚ã€‚

* å¹³æ–¹å–ä¸­æ³•ï¼š
é¦–å…ˆç®—å‡ºkey2ï¼Œæˆªå–ä¸­é—´è‹¥å¹²æ•°ä½ä½œä¸ºåœ°å€ï¼Œæ¯”å¦‚hash(123)=512,å› ä¸º1232=15129ï¼Œå–ä¸­é—´ä¸‰ä½ã€‚é‚£ä¸ºä»€ä¹ˆè¦å€¾å‘äºä¿ç•™å±…ä¸­çš„æ•°ä½å‘¢ï¼Œè¿™æ­£æ˜¯ä¸ºäº†ä½¿å¾—æ„æˆåŸå…³é”®ç çš„å„ä¸ªæ•°ä½ï¼Œèƒ½å¤Ÿå¯¹æœ€ç»ˆçš„æ•£åˆ—åœ°å€æœ‰å°½å¯èƒ½æ¥è¿‘çš„å½±å“ã€‚
![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7601a309f1c49de949fb9614a6111ca~tplv-k3u1fbpfcp-watermark.image)

ä½†è¿™äº›æ–¹æ³•å°±ä¸å¤šè¯´äº†ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯æ•°å­¦ä¸Šçš„æ–¹æ³•ï¼Œäº†è§£ä¸€ä¸‹å³å¯ã€‚æˆ‘ä»¬ç¼–ç¨‹è¯­è¨€ä¼šå¸®æˆ‘ä»¬é¢„ç½®ä¸€äº›å“ˆå¸Œå‡½æ•°ï¼Œæ¯”å¦‚ï¼š`MD5`ã€`SHA1`ã€`SHA256`ç­‰ã€‚

ä½†è¿™äº›å‡½æ•°çš„è¾“å‡ºåŸŸéƒ½æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚`MD5`ï¼Œå®ƒçš„å¤§å°æ˜¯32ä½çš„16è¿›åˆ¶æ•°ï¼Œéå¸¸å¤§ï¼Œè€Œæˆ‘ä»¬çš„å“ˆå¸Œè¡¨è§„æ¨¡ä¼šæ¯”è¾ƒå°ï¼Œå’Œä½ çš„æ•°æ®é‡æœ‰å…³ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ

è¿™é‡Œæœ‰ä¸ªæ¨è®ºï¼šå› ä¸ºå“ˆå¸Œå‡½æ•°`Hash(key)`å…·æœ‰æ»¡å°„æ€§å’Œç¦»æ•£æ€§ï¼Œé‚£ä¹ˆ`Hash(key)%M`ä¹Ÿå…·æœ‰æ»¡å°„æ€§å’Œç¦»æ•£æ€§

æ‰€ä»¥æˆ‘ä»¬åªè¦å–æ¨¡å°±è¡Œäº†ï¼Œå…¶å®`Hash(key)%M`æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å“ˆ = =ã€‚

å“ˆå¸Œå‡½æ•°åœ¨è®¡ç®—è¡Œä¸šé‡Œæœ‰å¾ˆå¤šåº”ç”¨ï¼Œé™¤äº†æˆ‘ä»¬ç°åœ¨åœ¨äº†è§£å“ˆå¸Œè¡¨å¤–ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸å¬è§çš„æ•°å­—ç­¾åï¼ŒæœåŠ¡å™¨ä¸ºäº†è´Ÿè½½å‡è¡¡è€Œåšçš„ä¸€è‡´æ€§å“ˆå¸Œè®¾è®¡ï¼Œæœç´¢æœåŠ¡ç”¨çš„å¸ƒéš†è¿‡æ»¤å™¨ç­‰ï¼Œéƒ½æ˜¯ç”¨çš„å“ˆå¸Œå‡½æ•°çš„ç‰¹æ€§ã€‚

## å“ˆå¸Œç¢°æ’

å“ˆå¸Œè¡¨çš„è®¾è®¡éå¸¸æ£’ï¼Œä»–è®©æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®å˜æˆäº†O(1)çš„å¤æ‚åº¦ã€‚ä½†æ˜¯æœ‰ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼Œå°±æ˜¯å“ˆå¸Œå‡½æ•°ä¼šå‘ç”Ÿç¢°æ’ï¼Œå¦‚ä½•è®¾è®¡è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†ä¼šå†³å®šå­—å…¸çš„æ•ˆç‡ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œè®¨è®ºæœ€å¸¸è§çš„ä¸¤ç§æ–¹æ³•ï¼šåˆ†ç¦»é“¾æ¥æ³•å’Œå¼€æ”¾å®šå€æ³•

### åˆ†ç¦»é“¾æ¥æ³•(Separate Chaining)
ä¿—ç§°æ‹‰é“¾æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ¯”è¾ƒå¥½ç†è§£ï¼Œç»™ä¸€å¼ å›¾å¤§æ¦‚å°±èƒ½ç†è§£äº†
![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68214a7b56b04d7bb92eb149f8347776~tplv-k3u1fbpfcp-watermark.image)

å¦‚æœè¿™ä¸ªé•¿æ¡æ˜¯æ•´ä¸ªæ•£åˆ—è¡¨ï¼Œé‚£ä¹ˆå…¶ä¸­çš„æ¯ä¸€ä¸ªå•å…ƒéƒ½å°†å„è‡ªæ‹¥æœ‰ä¸€ä¸ªå¯¹åº”çš„é“¾è¡¨ï¼Œè€Œæ¯ä¸€ä¸ªé“¾è¡¨éƒ½å¯ä»¥ç”¨æ¥å­˜æ”¾ä¸€ç»„å½¼æ­¤å†²çªçš„è¯æ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åˆ†ç¦»é“¾æ¥æ³•ã€‚

è¿™æ ·å°±èƒ½å¾ˆå¥½çš„è§£å†³å“ˆå¸Œå†²çªçš„é—®é¢˜ï¼Œä¿è¯äº†æ’å…¥åˆ é™¤å…ƒç´ çš„å¸¸æ•°æ—¶é—´ï¼Œå¯ä»¥è§£å†³ä»»æ„å¤šæ¬¡çš„å†²çªï¼Œä½†æ˜¯é—ç•™äº†ä¸€äº›é—®é¢˜ï¼š
* é“¾è¡¨éœ€è¦å¼•å…¥é¢å¤–çš„æŒ‡é’ˆï¼Œè€Œä¸ºäº†ç”Ÿæˆæˆ–é”€æ¯èŠ‚ç‚¹ï¼Œä¹Ÿéœ€è¦å€ŸåŠ©åŠ¨æ€å†…å­˜çš„ç”³è¯·ã€‚ç›¸å¯¹äºå¸¸è§„çš„æ“ä½œï¼Œæ­¤ç±»åŠ¨æ€ç”³è¯·æ“ä½œçš„æ—¶é—´æˆæœ¬å¤§è‡´è¦é«˜å‡ºä¸¤ä¸ªæ•°é‡çº§ã€‚
* é“¾è¡¨ä¸­å„èŠ‚ç‚¹çš„æ’å…¥å’Œé”€æ¯æ¬¡åºå®Œå…¨æ˜¯éšæœºçš„ã€‚å› æ­¤å¯¹äºä»»ä½•ä¸€ä¸ªé“¾è¡¨è€Œè¨€ï¼Œå…¶ä¸­çš„èŠ‚ç‚¹åœ¨ç‰©ç†ç©ºé—´ä¸Šï¼Œå¾€å¾€ä¸æ˜¯è¿ç»­åˆ†å¸ƒçš„ã€‚é‚£ç³»ç»Ÿå¾ˆéš¾é¢„æµ‹ä½ çš„è®¿é—®æ–¹å‘äº†ï¼Œæ— æ³•é€šè¿‡æœ‰æ•ˆçš„ç¼“å­˜åŠ é€ŸæŸ¥æ‰¾è¿‡ç¨‹ã€‚å½“æ•£åˆ—è¡¨çš„è§„æ¨¡éå¸¸ä¹‹å¤§ï¼Œä»¥è‡³äºä¸å¾—ä¸å€ŸåŠ©IOæ—¶ï¼Œè¿™ä¸€çŸ›ç›¾å°±æ˜¾å¾—æ›´åŠ çªå‡ºäº†ã€‚

åœ¨`JAVA`ä¸­ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨é“¾è¡¨å¢é•¿åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œä¼šæ¢æˆçº¢é»‘æ ‘å‚¨å­˜ã€‚è¿™ä¸ªåœ¨è¿™é‡Œä¸æ˜¯é‡ç‚¹ï¼Œæˆ‘è¦å¼•å‡ºçš„æ˜¯å¦ä¸€ä¸ªè§£å†³å“ˆå¸Œç¢°æ’çš„æ–¹æ³•ï¼šå¼€æ”¾å®šå€æ³•

### å¼€æ”¾å®šå€æ³•â€”â€”çº¿æ€§æ¢æµ‹`(Linear Probing)`

çº¿æ€§æ¢æµ‹`(Linear Probing)`æ˜¯å¼€æ”¾å®šå€æ³•çš„ä¸€ç§ï¼Œå› ä¸ºæˆ‘ä»¬`Swift`ä¸­çš„å“ˆå¸Œè¡¨è§£å†³å†²çªç”¨çš„å°±æ˜¯è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ç€é‡è®²è¿™ä¸ªè®¾è®¡ï¼ˆå¤§éƒ¨åˆ†[è½¬è½½å¤§ä½¬çš„](https://www.cnblogs.com/hongshijie/p/9419387.html)ï¼‰ã€‚

é‚£ä»€ä¹ˆå«å¼€æ”¾å®šå€æ³•å‘¢ï¼Ÿæˆ‘ä»¬å‰é¢è®²çš„åˆ†ç¦»é“¾æ¥æ³•ä¹Ÿè¢«ç§°ä¸ºå°é—­å®šå€æ³•ï¼Œä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

æˆ‘ä»¬ä¹ æƒ¯æŠŠå“ˆå¸Œè¡¨ä¸­æ¯ä¸ªå•å…ƒç§°ä¹‹ä¸ºæ¡¶`(bucket)`ï¼Œåœ¨åˆ†ç¦»é“¾æ¥æ³•ä¸­ï¼Œæ¯ä¸ªè¯æ¡åº”è¯¥å±äºå“ªä¸ªæ¡¶æ‰€å¯¹åº”çš„é“¾è¡¨ï¼Œéƒ½æ˜¯åœ¨äº‹å…ˆå·²ç»æ³¨å®šçš„ã€‚æ¯ä¸ªè¯æ¡ç»è¿‡ä¸€ä¸ªç¡®å®šçš„å“ˆå¸Œå‡½æ•°ï¼Œåªä¼šæ‰ç¡®å®šçš„æ¡¶é‡Œï¼Œå®ƒä¸å¯èƒ½è¢«æ•£åˆ—åˆ°å…¶ä»–çš„æ¡¶å•å…ƒï¼Œè€Œå¼€æ”¾å®šå€æ³•ä¼šè¢«æ•£åˆ—åˆ°å…¶ä»–çš„æ¡¶å•å…ƒï¼Œè¿™ä¸ªå°±æ˜¯å¼€æ”¾å’Œå°é—­çš„åŒºåˆ«ã€‚

åˆ†ç¦»é“¾æ¥æ³•çš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬å‰é¢è¯´è¿‡äº†ï¼Œé‚£å¦‚ä½•è§£å†³å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åå…¶é“è€Œè¡Œä¹‹ï¼Œä»…ä»…ä¾é åŸºæœ¬çš„æ•£åˆ—è¡¨ç»“æ„ï¼Œå°±åœ°æ’è§£å†²çªåè€Œæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä¹Ÿå°±æ˜¯é‡‡ç”¨æ‰€è°“çš„å¼€æ”¾å®šå€ç­–ç•¥ï¼Œå®ƒçš„ç‰¹ç‚¹åœ¨äºï¼šæ•£åˆ—è¡¨æ‰€å ç”¨çš„ç©ºé—´åœ¨ç‰©ç†ä¸Šå§‹ç»ˆæ˜¯åœ°å€è¿ç»­çš„ä¸€å—ï¼Œç›¸åº”çš„æ‰€æœ‰çš„å†²çªéƒ½åœ¨è¿™å—è¿ç»­ç©ºé—´ä¸­åŠ ä»¥æ’è§£ã€‚è€Œæ— éœ€å‘åˆ†ç¦»é“¾æ¥é‚£æ ·ç”³è¯·é¢å¤–çš„ç©ºé—´ã€‚å¯¹ï¼æ‰€æœ‰çš„æ•£åˆ—ä»¥åŠå†²çªæ’è§£éƒ½åœ¨æ•£åˆ—è¡¨è¿™æ ·ä¸€å—å°é—­çš„ç©ºé—´å†…å®Œæˆã€‚

å› æ­¤ç›¸åº”åœ°ï¼Œè¿™ç§ç­–ç•¥ä¹Ÿå¯ä»¥ç§°ä½œä¸ºé—­æ•£åˆ—ã€‚å¦‚æœæœ‰å†²çªå‘ç”Ÿï¼Œå°±è¦å°è¯•é€‰æ‹©å¦å¤–çš„å•å…ƒï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå¯ä¾›å­˜æ”¾çš„ç©ºå•å…ƒã€‚å…·ä½“å­˜æ”¾åœ¨å“ªä¸ªå•å…ƒï¼Œæ˜¯æœ‰ä¸åŒä¼˜å…ˆçº§çš„ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„æ˜¯ä»–åŸæœ¬å½’å±çš„é‚£ä¸ªå•å…ƒã€‚ä»è¿™ä¸ªå•å…ƒå¾€åï¼Œéƒ½æŒ‰ç…§æŸç§ä¼˜å…ˆçº§è§„åˆ™æ’æˆä¸€ä¸ªåºåˆ—ï¼Œè€Œåœ¨æŸ¥æ‰¾çš„æ—¶å€™ä¹Ÿæ˜¯æŒ‰ç€è¿™ä¸ªåºåˆ—è¡Œè¿›ï¼Œæ¯ä¸ªè¯æ¡å¯¹åº”çš„è¿™ä¸ªåºåˆ—è¢«ç§°ä¸ºæ¢æµ‹åºåˆ—oræŸ¥æ‰¾é“¾ã€‚

æŠ½è±¡æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬é‡åˆ°å†²çªåï¼Œä¼šç›¸ç»§å°è¯•h0(x),h1(x),h2(x)è¿™äº›å•å…ƒï¼Œå…¶ä¸­hi(x)= ( Hash( x ) + F ( I ) ) % TableSizeï¼Œå¹¶ä¸”çº¦å®šF(0)=0ï¼ŒFï¼ˆxï¼‰æ˜¯è§£å†³å†²çªçš„æ–¹æ³•ï¼Œå°±æ˜¯åˆšæ‰è¯´çš„é‚£ä¸ªâ€œä¼˜å…ˆçº§è§„åˆ™â€ã€‚å› ä¸ºæ‰€æœ‰çš„æ•°æ®éƒ½è¦æ”¾åœ¨è¿™å—ç©ºé—´ï¼Œæ‰€ä»¥å¼€æ”¾å®šå€æ‰€éœ€è¦çš„è¡¨è§„æ¨¡æ¯”åˆ†ç¦»é“¾æ¥è¦å¤§ã€‚é€šå¸¸è€Œè¨€å¼€æ”¾å®šå€æ³•çš„è£…å¡«å› å­lambdaåº”è¯¥ä½äº0.5ã€‚è€Œæ ¹æ®å¯¹ä¸åŒF(x)çš„é€‰æ‹©ï¼Œå­¦ç•Œåˆ’åˆ†å‡ºä¸‰ç§å¸¸ç”¨çš„æ¢æµ‹åºåˆ—ï¼šçº¿æ€§æ¢æµ‹æ³•ã€å¹³æ–¹æ¢æµ‹æ³•ã€åŒæ•£åˆ—ã€‚

åœ¨çº¿æ€§æ¢æµ‹æ³•ä¸­ï¼Œå‡½æ•°Fæ˜¯å…³äºiçš„çº¿æ€§å‡½æ•°ï¼Œå…¸å‹çš„æƒ…å½¢æ˜¯F(i)=iã€‚è¿™ç›¸å½“äºé€ä¸ªæ¢æµ‹æ¯ä¸ªå•å…ƒï¼ˆå¿…è¦æ—¶å¯ä»¥ç»•å›ï¼‰ä»¥æŸ¥æ‰¾å‡ºä¸€ä¸ªç©ºå•å…ƒã€‚ä¸‹é¢æ˜¾ç¤ºäº†å°†{89,18,49,58,69}æ’å…¥åˆ°ä¸€ä¸ªæ•£åˆ—è¡¨ä¸­çš„æƒ…å†µï¼ˆç«–ç€çœ‹ï¼‰ï¼Œä½¿ç”¨äº†å’Œä¹‹å‰ä¸€æ ·çš„æ•£åˆ—å‡½æ•°hash(x)=x%sizeï¼Œä»–ä»¬æœ‰å†²çªæ€ä¹ˆåŠï¼Ÿç”¨F(i)=iè¿™ä¸ªæ–¹æ³•ï¼Œæ¯æ¬¡ä»i=0å¼€å§‹å°è¯•ï¼Œé‚£ä¹ˆæ ¹æ®hi(x)= ( Hash( x ) + F ( I ) ) % TableSizeå°±å¯ä»¥è®¡ç®—å‡ºå„è‡ªä¸ç›¸å†²çªçš„åœ°å€äº†ã€‚
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1af0c54d5a44428bac219fe482a1f7ec~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬è„‘å†…å•æ­¥è°ƒè¯•ä¸€ä¸‹ï¼šç¬¬ä¸€ä¸ªå†²çªåœ¨49äº§ç”Ÿ:ï¼ˆ49%10+0ï¼‰%10=9ï¼Œè¢«89å äº†ï¼Œé‚£æ¥ç€å¾€åè¯•ï¼Œi=1ï¼Œï¼ˆ49%10+1ï¼‰%10=0ï¼Œç©ºçš„ï¼Œæ”¾å…¥è¿™ä¸ªç©ºé—²åœ°å€ï¼Œè¿™ä¸ªåœ°å€æ˜¯å¼€æ”¾çš„ã€‚58ä¾æ¬¡å’Œ18,89,49äº§ç”Ÿå†²çªï¼Œè¯•é€‰ä¸‰æ¬¡åæ‰æ‰¾åˆ°ä¸€ä¸ªç©ºå•å…ƒã€‚å¯¹69çš„å†²çªä¹Ÿå¦‚æ­¤è§£å†³ï¼Œä¸€æ—¦å†²çªï¼Œè¯•æ¢ç´§é‚»å…¶åçš„å•å…ƒï¼Œç›´è‡³æ‰¾åˆ°ç©ºå•å…ƒoræŠµè¾¾æ•£åˆ—è¡¨æœ«å°¾ã€‚çº¿æ€§æ¢æµ‹åºåˆ—0->1->2->3åœ¨ç‰©ç†ä¸Šä¿æŒè¿è´¯æ€§çš„ï¼Œå…·æœ‰å±€éƒ¨æ€§ï¼Œè¿™æ ·ä¸€æ¥ç³»ç»Ÿçš„ç¼“å­˜ä½œç”¨å°†å¾—åˆ°å……åˆ†å‘æŒ¥ï¼Œè€Œå¯¹äºå¤§è§„æ¨¡çš„æ•°æ®é›†ï¼Œè¿™æ ·ä¸€æ¥æ›´æ˜¯å¯ä»¥å‡å°‘I/Oçš„æ¬¡æ•°ã€‚åªè¦è¡¨è¶³å¤Ÿå¤§ï¼Œæ€»èƒ½æ‰¾åˆ°ä¸€ä¸ªç©ºé—²å•å…ƒï¼Œä½†æ˜¯è¿™å¤ªè´¹æ—¶é—´äº†ã€‚æ›´ç³Ÿçš„æ˜¯â€”â€”å°±ç®—ä¸€å¼€å§‹ç©ºé—²åŒºåŸŸå¤šï¼Œç»è¿‡å¤šæ¬¡æ’è§£å†²çªåï¼Œæ•°æ®æ‰€å æ®çš„å•å…ƒä¹Ÿä¼šå¼€å§‹å½¢æˆä¸€äº›åŒºå—ï¼Œèšé›†åœ¨ä¸€èµ·ï¼Œè¢«ç§°ä¸ºä¸€æ¬¡èšé›†(primary clustering)ï¼Œä½†æ•£åˆ—å‡½æ•°çš„åˆè¡·æ˜¯é¿å…æ•°æ®æ‰å †ï¼Œæ‰€ä»¥åé¢å¿…é¡»æ”¹è¿›ã€‚

é‚£ä¹ˆæ€»ä½“çœ‹æ¥æ•£åˆ—åˆ°åŒºå—çš„ä»»ä½•å…³é”®å­—éƒ½éœ€è¦å¤šæ¬¡è¯•é€‰å•å…ƒæ‰èƒ½è§£å†³å†²çªï¼Œç„¶åè¢«æ”¾åˆ°å¯¹åº”çš„é‚£ä¸ªåŒºå—é‡Œã€‚ä¸‹é¢åšä¸€ä¸ªæ€»ç»“:

ä¼˜ç‚¹ï¼š

* æ— éœ€é™„åŠ ç©ºé—´ï¼ˆæŒ‡é’ˆã€é“¾è¡¨ã€æº¢å‡ºåŒºï¼‰
* æ¢æµ‹åºåˆ—å…·æœ‰å±€éƒ¨æ€§ï¼Œå¯ä»¥åˆ©ç”¨ç³»ç»Ÿç¼“å­˜ï¼Œå‡å°‘IO

ç¼ºç‚¹ï¼š

* è€—è´¹æ—¶é—´>O(1)
* å†²çªå¢å¤šâ€”â€”ä»¥å¾€çš„å†²çªä¼šå¯¼è‡´åç»­çš„è¿ç¯å†²çªï¼Œå‘ç”Ÿæƒ¨çƒˆçš„è½¦ç¥¸

ä¸¾ä¸ªä¾‹å­å§ï¼Œè¿™æ ·æ„Ÿè§¦æ›´æ·±ã€‚æˆ‘ä»¬å¼€ä¸€ä¸ªsize=7çš„æ•£åˆ—è¡¨ï¼Œä¹Ÿä¿è¯äº†sizeæ˜¯ç´ æ•°ã€‚æŠŠ{0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ7}ï¼Œå°±æŒ‰è¿™ä¸ªé¡ºåºä¾æ¬¡æ’å…¥ã€‚å‰å››ä¸ªæ•°éƒ½æ²¡é—®é¢˜ï¼Œä¾æ¬¡æ’å…¥æ²¡æœ‰å†²çªã€‚ ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fdd4f8068b534b1b8726f80c460b762d~tplv-k3u1fbpfcp-watermark.image)

ä½†æ˜¯ä¸ºäº†æ’å…¥7ï¼Œæˆ‘ä»¬å…ˆè¯•æ¢0å‘ç°éç©ºï¼Œå¾€åèµ°ï¼Œä¾æ¬¡è¯•æ¢1,2,3éƒ½éç©ºï¼Œç›´åˆ°4å¯ä»¥æ”¾è¿›å»ã€‚
![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1fa6fab154ec43958b8509d88dc80d5b~tplv-k3u1fbpfcp-watermark.image)

åœ¨è¿™ä¸ªæ•£åˆ—è¡¨çš„ç”Ÿå­˜æœŸé‡Œåªæœ‰1ä¸ªå‘ç”Ÿå†²çªã€‚çœ‹ä¼¼å¾ˆæ£’å¯¹å§ï¼Œå†æ¥çœ‹å¦ä¸€æ’å…¥æ¬¡åºï¼š{7ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ3}ã€‚
![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f9a1395bf13436395134805363e87c5~tplv-k3u1fbpfcp-watermark.image)

æ’å…¥7æ²¡é—®é¢˜ï¼Œä½†æ’å…¥0çš„æ—¶å€™å°±æœ‰å†²çªäº†ï¼Œå®é™…ä¸Šè‡ªæ­¤ä¹‹åæ¯ä¸€ä¸ªæ•°æ’å…¥éƒ½ä¼šé‡åˆ°å†²çªï¼Œå‰åå¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼Œç¬¬äºŒç§æ’å…¥é¡ºåºå‘ç”Ÿçš„å¾ˆå¤šå†²çªæœ¬æ¥æ˜¯å¯ä»¥é¿å…çš„ã€‚è¿™ä¸ªæ—¶å€™æƒ³å¿…æˆ‘ä»¬æ”¹è¿›è¿™ç§ç­–ç•¥çš„æ„æ„¿å°±ååˆ†è¿«åˆ‡äº†ã€‚

æˆ‘ä»¬ä»”ç»†æ¥æ¨æ•²ä¸€ä¸‹ï¼Œè™½ç„¶åˆšæ‰ä»æ„Ÿæ€§è®¤è¯†çš„è§’åº¦ï¼Œæˆ‘ä»¬èƒ½å¯Ÿè§‰åˆ°çº¿æ€§æ¢æµ‹æ˜¯æœ‰å¿…è¦æ”¹è¿›çš„ï¼Œå› ä¸ºï¼šæˆ‘ä»¬èƒ½æ„ŸçŸ¥åˆ°ï¼Œè¡¨ä¸­å·²æœ‰å…ƒç´ è¶Šå¤šï¼Œæ–°æ’å…¥æ—¶éœ€è¦æ¢æµ‹çš„æ¬¡æ•°å°±è¶Šå¤šï¼Œè¿™è²Œä¼¼ä¸æ˜¯ä¸ªå¥½å…†å¤´ã€‚ä½†æ˜¯ç”¨æ•°å­¦èƒŒæ™¯ä½œä¸ºèƒŒä¹¦æ‰æ˜¯æœ‰è¯´æœåŠ›çš„ã€‚ï¼ˆä¸‹é¢å¯èƒ½æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œä½†å°½é‡è¯•ç€ç†è§£å§ï¼‰

å¯¹äºéšæœºå†²çªçš„è§£å†³æ–¹æ³•è€Œè¨€ï¼Œå¯ä»¥å‡è®¾æ¯æ¬¡æ¢æµ‹ä¸ä¹‹å‰çš„æ¢æµ‹æ— å…³ï¼Œè¿™æ˜¯æˆç«‹çš„ï¼Œå› ä¸ºéšæœºã€‚å¹¶ä¸”å‡è®¾æœ‰ä¸€ä¸ªå¾ˆå¤§è§„æ¨¡çš„è¡¨ï¼Œå…ˆè®¡ç®—å•æ¬¡å¤±è´¥æŸ¥æ‰¾çš„æœŸæœ›æ¢æµ‹æ¬¡æ•°â€”â€”è¿™ä¹Ÿæ˜¯æ‰¾åˆ°ä¸€ä¸ªç©ºå•å…ƒçš„æœŸæœ›æ¬¡æ•°ã€‚å·²çŸ¥ç©ºå•å…ƒæ‰€å æ¯”ä¾‹æ˜¯1-Î»ï¼Œé‚£ä¹ˆé¢„è®¡éœ€è¦æ¢æµ‹çš„å•å…ƒæ•°é‡æ˜¯1/(1-Î»)ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•æ¬¡å¤±è´¥æŸ¥æ‰¾çš„å¼€é”€æ¥è®¡ç®—æŸ¥æ‰¾æˆåŠŸçš„å¹³å‡å¼€é”€ã€‚

 

è¿™å¥è¯çš„å†…åœ¨é€»è¾‘æ˜¯è¿™æ ·çš„â€œå¤±è´¥æŸ¥æ‰¾çš„æ¢æµ‹æ¬¡æ•°=æ’å…¥æ—¶æ¢æµ‹æ¬¡æ•°=æŸ¥æ‰¾æˆåŠŸçš„æ¢æµ‹æ¬¡æ•°â€ï¼Œçœ‹ä¼¼æŒºçŸ›ç›¾çš„ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿä¸å¤ªç†è§£ï¼Œä½†æˆ‘ä»¬ä»”ç»†åˆ†æä¸€ä¸‹å°±èƒ½è®¤è¯†åˆ°å®ƒçš„é“ç†ï¼šé¦–å…ˆï¼Œå³å¼ï¼Œä¸€æ¬¡æˆåŠŸæŸ¥æ‰¾çš„æ¢æµ‹æ¬¡æ•°å°±ç­‰äºè¿™ä¸ªå…ƒç´ æ’å…¥çš„æ¢æµ‹æ¬¡æ•°ï¼Œè¿™ä¸ªä¸éš¾ç†è§£ï¼Œæ’å…¥çš„æ—¶å€™æ¢æµ‹næ¬¡ï¼Œç„¶åæ”¾å…¥ç©ºå•å…ƒï¼›ä¹‹åæŸ¥æ‰¾æ—¶ä¹Ÿæ˜¯æ¢æµ‹næ¬¡ï¼Œç¬¬n+1æ¬¡æ¢æµ‹ç›´æ¥å‘½ä¸­ï¼Œä¸¤è€…ç›¸ç­‰ã€‚ç„¶åè¯´å·¦å¼ï¼Œåœ¨æ’å…¥ä¹‹å‰ï¼Œå³å°†æ’å…¥æ—¶çš„çš„æ¢æµ‹æ¬¡æ•°=å¤±è´¥æŸ¥æ‰¾çš„æ¢æµ‹æ¬¡æ•°ï¼Œå› ä¸ºæ’å…¥å‰æ²¡æœ‰è¿™ä¸ªå…ƒç´ ï¼Œè‡ªç„¶æŸ¥æ‰¾å¤±è´¥ã€‚æ‰€ä»¥å·¦å¼=å³å¼ï¼Œè¿™å°±èƒ½å¤§æ¦‚ç†è§£äº†å§ã€‚

è¿˜æœ‰ä¸€ä»¶äº‹ï¼Œæ—©æœŸçš„Î»æ¯”è¾ƒå°ï¼Œæ‰€ä»¥é€ æ¬¡æ’å…¥å¼€é”€è¾ƒä½ï¼Œä»æ›´é™ä½äº†å¹³å‡å¼€é”€ã€‚æ¯”å¦‚åœ¨ä¸Šé¢é‚£ä¸ªè¡¨ä¸­ï¼ŒÎ»=0.5ã€‚

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/328b21ed1a0d4745a343e0100782794d~tplv-k3u1fbpfcp-watermark.image)

è®¿é—®18çš„å¼€é”€æ˜¯åœ¨18è¢«æ’å…¥æ—¶ç¡®å®šçš„ï¼Œæ­¤æ—¶Î»=0.2ï¼Œè€Œç”±äº18æ˜¯æ’å…¥åˆ°ä¸€ä¸ªæ¯”è¾ƒç¨€ç–çš„è¡¨ä¸­ï¼Œå› æ­¤å¯¹ä»–çš„è®¿é—®æ¯”æ›´æ™šæ’å…¥çš„å…ƒç´ ï¼ˆe.g. 69ï¼‰æ›´å®¹æ˜“ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç§¯åˆ†æ¥ä¼°è®¡å¹³å‡çš„æ’å…¥æ—¶é—´ï¼š
![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/28f470d7e45a4f36861222cf748852d6~tplv-k3u1fbpfcp-watermark.image)

è¿™å°±æ¯”ä¹‹å‰çº¿æ€§æ¢æµ‹çš„å…¬å¼æ›´å¥½äº†ï¼Œå¦å¤–ï¼Œèšé›†è¿™ä¸ªé—®é¢˜ï¼Œä¸ä»…æ˜¯ç†è®ºä¸Šæ£˜æ‰‹ï¼Œåœ¨å…·ä½“å®ç°ä¸­ä¹Ÿæ—¶éšæ—¶ç°ï¼Œå°±åƒå¹½çµä¸€æ ·ã€‚ä¸€ä¸ªå¹½çµï¼Œæ•°æ®èšé›†çš„å¹½çµï¼Œåœ¨å¼€æ”¾å®šå€è¡¨é‡Œå¾˜å¾Šã€‚ä¸ºäº†å¯¹è¿™ä¸ªå¹½çµè¿›è¡Œç¥åœ£çš„å›´å‰¿ï¼Œå­¦ç•Œçš„ä¸€åˆ‡åŠ¿åŠ›ï¼Œè®¡ç®—æœºç§‘å­¦å®¶ï¼Œæ•°å­¦å®¶ï¼Œè¿˜æœ‰å„è·¯å·¥ç¨‹å¸ˆéƒ½è”åˆèµ·æ¥äº†ã€‚ï¼ˆè¿™ä¸ªå¹½çµçš„ç¡®ä¹Ÿä¸ºæ•£åˆ—ç†è®ºçš„åˆ›æ–°å‘å±•æä¾›äº†åŠ¨åŠ›ï¼Œæ˜¯æœ‰ä¸€å®šè¿›æ­¥æ„ä¹‰çš„ï¼‰

æˆ‘ä»¬å†æ¥çœ‹ï¼Œå¦‚æœÎ»=0.75,é‚£ä¹ˆä¸Šé¢çš„å…¬å¼æŒ‡å‡ºï¼Œçº¿æ€§æ¢æµ‹ä¸­1æ¬¡æ’å…¥é¢„è®¡è¦è¿›è¡Œ8.5æ¬¡æ¢æµ‹ã€‚å¦‚æœÎ»=0.9ï¼Œä½ çŒœçŒœæˆ‘ä»¬è¦æ‰¾å¤šå°‘æ¬¡èƒ½æ‰¾åˆ°ç©ºå•å…ƒï¼Ÿ50æ¬¡ï¼è¿™ç»å¯¹ä¸åˆç†ã€‚ä»è¿™äº›å…¬å¼æˆ‘ä»¬å¯ä»¥çª¥è§ï¼šå¦‚æœæ•´ä¸ªè¡¨>50%çš„åŒºåŸŸè¢«å¡«æ»¡ï¼Œé‚£ä¹ˆçº¿æ€§æ¢æµ‹å°±ä¸æ˜¯ä¸ªå¥½åŠæ³•ã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ˜¯ä¸ªç¨€ç–è¡¨ï¼ŒÎ»å¾ˆå°ï¼Œé‚£ä¹ˆçº¿æ€§æ¢æµ‹å¯è°“å¦‚é±¼å¾—æ°´äº†â€”â€”æˆ‘ä»¬å°±ç®—æŒ‰è¿™ä¸ªâ€œå°â€çš„æ¦‚å¿µé‡Œæ’‘æ­»äº†è¯´ï¼ŒÎ»=0.5ï¼Œæ’å…¥æ—¶å¹³å‡åªç”¨æ¢æµ‹â€¦..çŒœçŒœâ€¦.2.5æ¬¡ï¼ï¼Œå¹¶ä¸”å¯¹äºæˆåŠŸæŸ¥æ‰¾å¹³å‡åªéœ€è¦æ¢æµ‹1.5æ¬¡ï¼Œé…·ä¸é…·ï¼ è¦ä»¥æ—¶é—´æ¡ä»¶åœ°ç‚¹ä¸ºè½¬ç§»ã€‚

è®²åˆ°è¿™çº¿æ€§æ¢æµ‹å°±è®²å®Œäº†ï¼ˆå¤§ä½¬å‘è¨€å®Œæ¯•ï¼ŒğŸ‰ï¼‰

### æ€»ç»“
è§£å†³å“ˆå¸Œå†²çªï¼Œä¼ ç»Ÿçš„æ‹‰é“¾æ³•æ•ˆç‡ä¸Šä¼šæœ‰ä¸€å®šçš„ç¼ºé™·ï¼Œæ‰€ä»¥é‡‡ç”¨å¼€æ”¾å®šå€æ³•ï¼Œæˆ‘ä»¬`Swift`ä¸­ç”¨çš„æ˜¯çº¿æ€§æ¢æµ‹ã€‚

å¼€æ”¾å®šå€æ³•ç®€å•ç‚¹è®²ï¼Œå°±æ˜¯åœ¨ä½ å‘ç”Ÿå“ˆå¸Œå†²çªçš„æ—¶å€™ï¼Œä¸å»å¼€è¾Ÿæ–°çš„ç©ºé—´å­˜æ”¾å†²çªçš„è¯æ¡ï¼Œè€Œæ˜¯å­˜åœ¨ä½ å“ˆå¸Œè¡¨å…¶ä»–ç©ºçš„æ¡¶é‡Œã€‚ä½†æ˜¯ä½ éœ€è¦å®šä¸€ä¸ªè§„åˆ™æ¥æ¢æµ‹ç©ºæ¡¶ï¼Œæ¯”å¦‚æ¯æ¬¡å‘ç”Ÿç¢°æ’ï¼Œä½ ä¼˜å…ˆæ‰¾å½“å‰æ¡¶çš„ä¸‹ä¸ªæ¡¶å­˜æ”¾ï¼Œå¦‚æœä¸‹ä¸ªæ¡¶å·²ç»å­˜æ”¾è¯æ¡ï¼Œé‚£ä¹ˆåœ¨æ‰¾ä¸‹ä¸‹ä¸ªæ¡¶ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºæ¡¶å­˜æ”¾ã€‚è¿™ä¸ªè§„åˆ™ä¹Ÿå¯ä»¥å®šä¸ºæ‰¾ä¸Šä¸€ä¸ªæ¡¶ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªæ¡¶éš”ç€ä¸€ä¸ªæ¡¶æ‰¾ã€‚éªšæ°”ç‚¹çš„ï¼Œä½ å¯ä»¥å–ä½ å½“å‰æ¡¶çš„ä¸‹æ ‡å€¼åšå¹³æ–¹ï¼Œç„¶åå†æ¬¡ä»¥è¡¨å¤§å°å–ä½™çš„å€¼æ¥æ‰¾ç©ºæ¡¶ï¼Œå†æ¬¡ç”¨å“ˆå¸Œå‡½æ•°æ‰¾ç©ºæ¡¶ä¹Ÿæ˜¯ä¸é”™çš„æ–¹æ³•ã€‚

è¿™ä¸ªæ¢æµ‹è§„åˆ™å…¶å®ç›¸å½“äºä¸€ä¸ªå‡½æ•°äº†ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°æ˜¯çº¿æ€§çš„ï¼Œé‚£ä¹ˆè¢«ç§°ä¸ºçº¿æ€§æ¢æµ‹ã€‚å¼€æ”¾å®šå€æ³•ä¼šå ç”¨åˆ«äººçš„æ¡¶ï¼Œä¸éš¾æƒ³è±¡ï¼Œå½“è¯æ¡æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œæ•ˆç‡ä¼šç›´çº¿ä¸‹é™ï¼Œéœ€è¦æŠŠå“ˆå¸Œè¡¨æ‰©å®¹ã€‚æ‰€ä»¥æ•°æ®é‡å’Œå“ˆå¸Œè¡¨å¤§å°æ¯æ¯ç›¸å…³ï¼Œå…·ä½“çš„æ¯”ä¾‹å‰é¢å¤§ä½¬è¯´è¿‡äº†ã€‚ï¼ˆæ‹‰é“¾æ³•æ•°æ®å¤šäº†ï¼Œä¹Ÿæ˜¯éœ€è¦æ‰©å®¹çš„ï¼‰

æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸‹`Dictionary`ä¸­æºç æ˜¯å¦‚ä½•å®ç°å“ˆå¸Œè¡¨çš„

# `Dictionary`çš„åˆå§‹åŒ–å‡½æ•°

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç”Ÿæˆ[`SIL`æ–‡ä»¶](https://juejin.cn/post/6904994620628074510)
æŸ¥çœ‹å¾—çŸ¥`Dictionary`çš„åˆå§‹åŒ–å‡½æ•°ï¼š
```swift
  %39 = function_ref @Swift.Dictionary.init(dictionaryLiteral: (A, B)...) -> [A : B] : $@convention(method) <Ï„_0_0, Ï„_0_1 where Ï„_0_0 : Hashable> (@owned Array<(Ï„_0_0, Ï„_0_1)>, @thin Dictionary<Ï„_0_0, Ï„_0_1>.Type) -> @owned Dictionary<Ï„_0_0, Ï„_0_1> // user: %40
```
æ‰€ä»¥æˆ‘ä»¬åœ¨æºç ä¸­è¿è¡Œä»£ç ï¼Œå¹¶æ‰“ä¸Šæ–­ç‚¹è°ƒè¯•
```swift
  public init(dictionaryLiteral elements: (Key, Value)...) {
  // ç”Ÿæˆä¸€ä¸ª_NativeDictionaryå¯¹è±¡
    let native = _NativeDictionary<Key, Value>(capacity: elements.count)
    //éå†æ•´ä¸ªè¯æ¡
    for (key, value) in elements {
   //åœ¨nativeå¯¹è±¡ä¸­è°ƒç”¨findæ–¹æ³•ï¼Œå¯»æ‰¾æ¡¶bucketï¼Œfoundæ˜¯boolå€¼
      let (bucket, found) = native.find(key)
      //åˆå§‹åŒ–ä¸­ï¼Œå¦‚æœfoundæ˜¯yesï¼Œè¯´æ˜æœ‰é‡å¤çš„å…ƒç´ ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œä¸ä¿¡ä½ è‡ªå·±è¯•ä¸‹ï¼Œä¼šæŠ¥é”™ä¸‹é¢çš„æç¤º
      _precondition(!found, "Dictionary literal contains duplicate keys")
      //æŠŠè¯æ¡æ’å…¥æ¡¶ä¸­
      native._insert(at: bucket, key: key, value: value)
    }
    //è‡ªå·±çš„åˆå§‹åŒ–æ–¹æ³•
    self.init(_native: native)
  }
```

æˆ‘ä»¬ç®€å•çœ‹ä¸‹`Bucket`çš„ç»“æ„ï¼š
```swift
internal struct Bucket {
    internal var offset: Int
}
```
éå¸¸ç®€å•ï¼Œä½ å¯ä»¥ç›´æ¥ç†è§£æˆ`var offset: Int`ï¼Œç›¸å½“äºæ•°ç»„ä¸‹æ ‡äº†ã€‚

æ‰¾åˆ°åˆå§‹åŒ–æ–¹æ³•åï¼Œæˆ‘ä»¬è¦æ˜ç¡®ä¸‹è‡ªå·±çš„ç›®æ ‡ï¼Œå°±æ˜¯æ‰¾åˆ°æ ¸å¿ƒ`HashTable`åœ¨å“ªã€‚

å¦‚æœä½ æ–­ç‚¹ä¸€è·¯å¾€ä¸‹èµ°ï¼Œä½ ä¼šåœ¨`_DictionaryStorage`ç”³è¯·å †ç©ºé—´çš„æ—¶å€™ï¼Œçœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š

```swift
static internal func allocate(
    scale: Int8,
    age: Int32?,
    seed: Int?
) -> _DictionaryStorage {
    // The entry count must be representable by an Int value; hence the scale's
    // peculiar upper bound.
    _internalInvariant(scale >= 0 && scale < Int.bitWidth - 1)
    
    let bucketCount = (1 as Int) &<< scale
    let wordCount = _UnsafeBitset.wordCount(forCapacity: bucketCount)
    let storage = Builtin.allocWithTailElems_3(
        _DictionaryStorage<Key, Value>.self,
        wordCount._builtinWordValue, _HashTable.Word.self,
        bucketCount._builtinWordValue, Key.self,
        bucketCount._builtinWordValue, Value.self)
    
    let metadataAddr = Builtin.projectTailElems(storage, _HashTable.Word.self)
    let keysAddr = Builtin.getTailAddr_Word(
        metadataAddr, wordCount._builtinWordValue, _HashTable.Word.self,
        Key.self)
    let valuesAddr = Builtin.getTailAddr_Word(
        keysAddr, bucketCount._builtinWordValue, Key.self,
        Value.self)
    storage._count = 0
    storage._capacity = _HashTable.capacity(forScale: scale)
    storage._scale = scale
    storage._reservedScale = 0
    storage._extra = 0
    
    if let age = age {
        storage._age = age
    } else {
        // The default mutation count is simply a scrambled version of the storage
        // address.
        storage._age = Int32(
            truncatingIfNeeded: ObjectIdentifier(storage).hashValue)
    }
    
    storage._seed = seed ?? _HashTable.hashSeed(for: storage, scale: scale)
    storage._rawKeys = UnsafeMutableRawPointer(keysAddr)
    storage._rawValues = UnsafeMutableRawPointer(valuesAddr)
    
    // Initialize hash table metadata.
    storage._hashTable.clear()
    return storage
}
```

æˆ‘ä»¬åˆä¸€æ¬¡çœ‹åˆ°`allocWithTailElems_`ï¼Œè¿™ä¸ªå‡½æ•°çš„æ„æ€æ˜¯ï¼Œé™¤äº†ç»™å½“å‰å¯¹è±¡æœ¬èº«å¼€è¾Ÿå †ç©ºé—´ï¼Œä¹Ÿä¼šä¸ºå°¾éƒ¨è·Ÿç€çš„å…ƒç´ å¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œæ‰€ä»¥ä»–ä»¬è¿ç€çš„ï¼Œè¿™ä¸ªç­‰ä½ çœ‹å®Œ`HashTable`ç»“æ„åè‡ªå·±éªŒè¯ã€‚`_DictionaryStorage`ã€`_HashTable.Word`ã€`Key`ã€`Value`åœ¨å†…å­˜ä¸Šæ˜¯ç´§æŒ¨ç€çš„ã€‚

è¿™é‡Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†æ¡¶`bucket`çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯`HashTable`çš„è§„æ¨¡ï¼š
```swift
let bucketCount = (1 as Int) &<< scale
storage._scale = scale
```
`bucketCount`ç”±`scale`ä½ç§»è·å¾—ï¼Œè€Œ`scale`ä¹Ÿèµ‹å€¼ç»™äº†`_DictionaryStorage`çš„`scale`ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å‰é¢`_DictionaryStorage`å†…å­˜ç»“æ„ä¸­è·å–`scale`åï¼Œé€šè¿‡åŒæ ·çš„è¿ç®—å°±èƒ½è·å¾—`bucketCount`

é‚£æœ€åˆçš„`scale`æ˜¯å‡½æ•°å¤–éƒ¨ä¼ è¿›æ¥çš„ï¼Œé‚£æ˜¯å¦‚ä½•å¾—åˆ°è¿™ä¸ªæ•°çš„å‘¢ï¼Ÿè¿™ä¸ªç–‘é—®å…ˆæ”¾ä¸€ä¸‹ï¼Œå…ˆçœ‹ä¸‹æˆ‘ä»¬æ‰¾åˆ°çš„`HashTable`


# `HashTable`çš„æ¢ç´¢
```swift

internal struct _HashTable {
// æºç è¿½å¯»ä¸‹å»ï¼ŒWordå°±æ˜¯UInt
  internal typealias Word = _UnsafeBitset.Word

  internal var words: UnsafeMutablePointer<Word>

  internal let bucketMask: Int

  internal init(words: UnsafeMutablePointer<Word>, bucketCount: Int) {
    _internalInvariant(bucketCount > 0 && bucketCount & (bucketCount - 1) == 0,
      "bucketCount must be a power of two")
    self.words = words
    // The bucket count is a power of two, so subtracting 1 will never overflow
    // and get us a nice mask.
    self.bucketMask = bucketCount &- 1
  }
  ...
}
```

ç»“æ„å¾ˆç®€å•ï¼Œä¸€å…±å°±ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­`words`å­˜æ”¾çš„å°±æ˜¯`HashTable`æ¡¶çš„æŒ‡é’ˆï¼ŒæŒ‡å‘çš„å†…å®¹ä»¥`UInt`å±•ç¤ºï¼Œçœ‹æºç ä¸éš¾å‘ç°è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„åœ°æ–¹ç´§è·Ÿç€`_DictionaryStorage`å†…å®¹ï¼Œæˆ‘ä»¬çœ‹`_DictionaryStorage`å¦‚ä½•å¾—åˆ°`_HashTable`çš„
```swift
  internal final var _bucketCount: Int {
    @inline(__always) get { return 1 &<< _scale }
  }
  
  internal final var _metadata: UnsafeMutablePointer<_HashTable.Word> {
    @inline(__always) get {
      let address = Builtin.projectTailElems(self, _HashTable.Word.self)
      return UnsafeMutablePointer(address)
    }
  }

  internal final var _hashTable: _HashTable {
    @inline(__always) get {
      return _HashTable(words: _metadata, bucketCount: _bucketCount)
    }
  }
```
è¿™ä¸ªæŒ‡é’ˆæ¥è‡ª`Builtin.projectTailElems`ï¼Œå¾—åˆ°å°±æ˜¯`_DictionaryStorage`å°¾éƒ¨å†…å®¹çš„æŒ‡é’ˆã€‚

`HashTable`æ˜¯å¦‚ä½•ç”¨`UInt`æ¥è¡¨ç¤ºæ¡¶`bucket`çš„å‘¢ï¼Ÿå…¶å®è¿™ä¸ªå’Œ`BitMap`ä¸€æ ·ï¼Œç”¨`UInt`çš„æ¯ä¸ª`Bit`ä½è¡¨ç¤ºä¸€ä¸ªæ¡¶ï¼Œå½“`Bit`ä½ç­‰äº0çš„æ—¶å€™ï¼Œè¯´æ˜æ˜¯ç©ºæ¡¶ï¼Œå¦‚æœæ˜¯1ï¼Œé‚£ä¹ˆè¡¨ç¤ºè¯¥ä½ç½®å­˜åœ¨å…ƒç´ 

è¯´å®Œäº†`words`åï¼Œæˆ‘ä»¬çœ‹ä¸‹å¦ä¸€ä¸ªå±æ€§`bucketMask`ï¼Œæˆ‘ä»¬çœ‹åˆ°åˆå§‹åŒ–èµ‹å€¼çš„æ—¶å€™ï¼Œæœ‰ä¸ªè¡¨è¾¾å¼`bucketCount &- 1`ï¼Œé‚£è¿™ä¸ªæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ

å‰é¢æˆ‘ä»¬è¯´è¿‡äº†ï¼Œå¦‚æœ`key`ç”¨å“ˆå¸Œå‡½æ•°ï¼ˆæ¯”å¦‚`MD5`ï¼‰å¾—åˆ°äº†ä¸€ä¸ªå¾ˆå¤§çš„å“ˆå¸Œå€¼ï¼Œå¯ä»¥ç”¨å–ä½™çš„æ–¹å¼ç¼©å°å“ˆå¸Œå‡½æ•°çš„è¾“å‡ºåŸŸï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå¯ä»¥æ¨¡ä¸Šå“ˆå¸Œè¡¨çš„å¤§å°ï¼Œè¿™æ ·æ–°å¾—åˆ°çš„å“ˆå¸Œå€¼å°±èƒ½å‡åŒ€çš„åˆ†å¸ƒåˆ°å“ˆå¸Œè¡¨ä¸Šã€‚ä½†æ˜¯ï¼Œåœ¨è®¡ç®—æœºä¸­æ¨¡è¿ç®—æ˜¯è¿ç®—ä¸­æ¶ˆè€—æœ€å¤§çš„ï¼Œæœ‰æ²¡æœ‰åŠæ³•ä¼˜åŒ–å‘¢ï¼Ÿè¿™ä¸ªå°±æ˜¯`bucketMask`å­˜åœ¨çš„æ„ä¹‰ã€‚

å…ˆæ‰“ä¸€ä¸ªæ¯”æ–¹ï¼Œåœ¨åè¿›åˆ¶ä¸­ï¼Œé™¤æ•°æ˜¯`10000`ï¼Œå¦‚ä½•å¾—åˆ°`123456`çš„ä½™æ•°ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿä¸€ç§æ–¹æ³•å°±æ˜¯è€è€å®å®ç®—ï¼Œå¾—åˆ°ç­”æ¡ˆ`3456`ï¼Œä½†èªæ˜çš„ä½ ä¸€å®šä¸ä¼šè¿™ä¹ˆåšï¼Œç›´æ¥å–æ•°å­—çš„åå››ä½ï¼Œå°±èƒ½å¾—åˆ°ç­”æ¡ˆã€‚åŸå› å°±ä¸è¯´äº†ï¼Œåœ¨åè¿›åˆ¶ä¸­ï¼Œåªè¦é™¤æ•°æ˜¯`10`çš„å€æ•°ï¼Œéƒ½å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•ã€‚

åŒç†ï¼Œåœ¨äºŒè¿›åˆ¶ä¸­ï¼Œåªè¦é™¤æ•°æ˜¯`2`çš„å€æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨ä¸Šè¿°æ–¹æ³•æ±‚å¾—ä½™æ•°ã€‚æ¯”å¦‚é™¤æ•°åŒæ ·æ˜¯`10000`ï¼Œä¸è¿‡è¿™ä¸ªæ•°æ˜¯äºŒè¿›åˆ¶è¡¨ç¤ºçš„ï¼Œç›¸å½“äºåè¿›åˆ¶çš„`16`ï¼Œæ˜¯`2`çš„å€æ•°ã€‚é‚£å¦‚ä½•å–`110011010`çš„ä½™æ•°å‘¢ï¼Ÿé™¤äº†ç®—ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ä¸Šé¢ä¸€æ ·çš„æ–¹æ³•ï¼Œå–æœ€åçš„å››ä½æ•°`1010`ï¼Œå°±æ˜¯`110011010`çš„ä½™æ•°ã€‚

æ–¹æ³•çŸ¥é“äº†ï¼Œæˆ‘ä»¬å¦‚ä½•ç”¨è®¡ç®—æœºè¡¨è¾¾å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨`110011010`å’Œ`1111`åšä¸è¿ç®—ï¼Œå°±èƒ½å–åˆ°åé¢å››ä½æ•°ï¼Œè€Œä¸”ä½è¿ç®—çš„æ•ˆç‡æ˜¯å¾ˆé«˜çš„ã€‚è€Œ`1111`ä¸é™¤æ•°`10000`åªç›¸å·®1ï¼Œçœ‹åˆ°è¿™ï¼Œæœ‰æ²¡æœ‰æ˜ç™½äº†ä»€ä¹ˆï¼Ÿæ¢è€Œè¨€ä¹‹ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•°æ˜¯`2`çš„å€æ•°ï¼Œä½œä¸ºé™¤æ•°çš„è¯ï¼Œé‚£ä¹ˆæ±‚ä»»ä½•æ•°çš„ä½™æ•°ï¼Œåªè¦å°†è¯¥é™¤æ•°å‡ä¸€ï¼Œç„¶åå’Œè¦æ±‚çš„æ•°åšä¸è¿ç®—å°±èƒ½è·å¾—ä½™æ•°ã€‚

å›åˆ°`bucketMask`ä¸­ï¼Œ`bucketMask`ç­‰äº`bucketCount &- 1`ï¼Œåªè¦`bucketCount`æ»¡è¶³æ˜¯2çš„å€æ•°ï¼Œé‚£ä¹ˆ`bucketMask`å°±æ˜¯å½“ä½œæ˜¯ç»™å–ä½™çš„æ ‡è®°ä½¿ç”¨ï¼Œä»»ä½•å¤§çš„å“ˆå¸Œå€¼ä¸ä¸Š`bucketMask`å°±èƒ½æ˜ å°„åˆ°å“ˆå¸Œè¡¨ä¸Šã€‚è€Œ`bucketCount`ç­‰äº`1 &<< _scale`ï¼Œæ°å¥½æ˜¯2çš„å€æ•°ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“äº†`_scale`çš„ä½œç”¨ï¼Œå°±æ˜¯è·å–å“ˆå¸Œè¡¨å¤§å°çš„ï¼Œå“ˆå¸Œè¡¨çš„è§„æ¨¡ä¹Ÿä¸€å®šæ˜¯2çš„å€æ•°ã€‚

# å“ˆå¸Œè¡¨çš„è§„æ¨¡

çœ‹äº†ä¸Šæ–‡æˆ‘ä»¬å¾—çŸ¥ï¼Œå“ˆå¸Œè¡¨çš„è§„æ¨¡`bucketCount`æ˜¯`1 &<< _scale`è¿™æ ·è·å¾—çš„ï¼Œé‚£ä¹ˆ`scale`æ˜¯å¦‚ä½•å¾—åˆ°çš„å‘¢ï¼Ÿç›´æ¥çœ‹æºç ï¼š
```swift
/// The inverse of the maximum hash table load factor.
  private static var maxLoadFactor: Double {
    @inline(__always) get { return 3 / 4 }
  }

  internal static func capacity(forScale scale: Int8) -> Int {
    let bucketCount = (1 as Int) &<< scale
    return Int(Double(bucketCount) * maxLoadFactor)
  }

  internal static func scale(forCapacity capacity: Int) -> Int8 {
    let capacity = Swift.max(capacity, 1)
    // Calculate the minimum number of entries we need to allocate to satisfy
    // the maximum load factor. `capacity + 1` below ensures that we always
    // leave at least one hole.
    let minimumEntries = Swift.max(
      Int((Double(capacity) / maxLoadFactor).rounded(.up)),
      capacity + 1)
    // The actual number of entries we need to allocate is the lowest power of
    // two greater than or equal to the minimum entry count. Calculate its
    // exponent.
    let exponent = (Swift.max(minimumEntries, 2) - 1)._binaryLogarithm() + 1
    _internalInvariant(exponent >= 0 && exponent < Int.bitWidth)
    // The scale is the exponent corresponding to the bucket count.
    let scale = Int8(truncatingIfNeeded: exponent)
    _internalInvariant(self.capacity(forScale: scale) >= capacity)
    return scale
  }
```
`scale`çš„è·å¾—ï¼Œå°±æ˜¯å­˜ç²¹çš„æ•°å­¦è¿ç®—ï¼Œåœ¨å‰é¢å­—å…¸çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œ`capacity`ä¼ è¿›æ¥çš„æ˜¯å­—å…¸çš„è¯æ¡ä¸ªæ•°ã€‚åé¢æ‰©å®¹çš„è¯ï¼Œå¯èƒ½ä¼ è¿›æ¥çš„æ˜¯å­—å…¸çš„`capacity`ï¼ˆè¿™ä¸ªæ˜¯æˆ‘çŒœæµ‹ï¼Œæ²¡æœ‰çœ‹æºç å“¦ï¼‰ã€‚

# `Word`å­—æ®µçš„ä¸ªæ•°

å‰é¢å¼€è¾Ÿç©ºé—´çš„æ—¶å€™æœ‰ä¸ªç»†èŠ‚æ²¡æœ‰è®²ï¼š
```swift
let storage = Builtin.allocWithTailElems_3(
        _DictionaryStorage<Key, Value>.self,
        wordCount._builtinWordValue, _HashTable.Word.self,
        bucketCount._builtinWordValue, Key.self,
        bucketCount._builtinWordValue, Value.self)
```

`bucketCount`æˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œé‚£ä¹ˆ`wordCount`çš„å¤§å°æ˜¯å¤šå°‘å‘¢ï¼Ÿ

`_HashTable.Word`å‰é¢æåˆ°è¿‡ï¼Œå°±æ˜¯`UInt`ï¼Œç”¨`UInt`çš„`bit`ä½å½“ä½œæ¡¶`bucket`ã€‚è€Œ`UInt`æ˜¯8ä¸ªå­—èŠ‚å¤§å°ï¼Œä¹Ÿå°±æ˜¯64ä¸ª`bit`ä½ï¼Œä¸€ä¸ª`UInt`æœ€å¤šå½“æˆ64ä¸ªæ¡¶ï¼Œæ‰€ä»¥å­˜åœ¨ä¸€ä¸ªè§„æ¨¡æ¯”64å¤§çš„å“ˆå¸Œè¡¨ï¼Œ1ä¸ª`_HashTable.Word`è‚¯å®šè®°å½•ä¸äº†ï¼Œéœ€è¦`wordCount`ä¸ª`_HashTable.Word`ï¼Œé‚£ä¹ˆ`wordCount`æ€ä¹ˆæ±‚å‘¢ï¼Ÿ

`wordCount`å’Œ`scale`ä¸€æ ·ï¼Œä¹Ÿæ˜¯å­˜ç²¹çš„è¿ç®—ï¼Œä¸è¿‡æˆ‘åœ¨æŠŠ`Dictionary`åº•å±‚ç¿»è¯‘æˆ`swift`å®ç°çš„æ—¶å€™ç”¨åˆ°äº†`wordCount`ï¼Œæ‰€ä»¥ç›´æ¥è´´ç¿»è¯‘åçš„ä»£ç äº†ï¼š
```swift
mutating func getWordCount() -> Int {
        let bucketCount = (1 as Int) &<< scale
        let kElement = bucketCount &+ UInt.bitWidth &- 1
        let element = UInt(bitPattern: kElement)
        let capacity = UInt(bitPattern: UInt.bitWidth)
        return Int(bitPattern: element / capacity)
    }
```

# `Dictionary`åº•å±‚çš„çº¿æ€§æ¢æµ‹(Linear Probing)

æˆ‘ä»¬å…ˆæ¥çœ‹`Dictionary`æŸ¥æ‰¾`Key`åœ¨å“ªä¸ªæ¡¶çš„æ ¸å¿ƒæ–¹æ³•ï¼Œæ–­ç‚¹å¾ˆå®¹æ˜“æ‰¾åˆ°çš„ï¼š

```swfit
internal final func find<Key: Hashable>(_ key: Key, hashValue: Int) -> (bucket: _HashTable.Bucket, found: Bool) {
    //è·å–hashTableå¯¹è±¡
    let hashTable = _hashTable
    //è·å–keyçš„hashå€¼åœ¨hashTableä¸­å¯¹åº”çš„æ¡¶ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ ‡
    var bucket = hashTable.idealBucket(forHashValue: hashValue)
    //éå†ï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯è¿™ä¸ªæ¡¶åœ¨æ˜¯å¦å­˜åœ¨å€¼
    while hashTable._isOccupied(bucket) {
        //åˆ¤æ–­å½“å‰æ¡¶å­˜æ”¾çš„keyä¸è¦æ‰¾çš„keyæ˜¯å¦ä¸€è‡´
        if uncheckedKey(at: bucket) == key {
            // æ‰¾åˆ°keyï¼Œè¿”å›trueï¼Œå¹¶ä¸”è¿”å›keyæ‰€åœ¨æ¡¶çš„ä½ç½®
            return (bucket, true)
        }
        // çº¿æ€§æ¢æµ‹ï¼Œè·å–ä¸‹ä¸€ä¸ªç›®æ ‡æ¡¶çš„ä½ç½®
        bucket = hashTable.bucket(wrappedAfter: bucket)
    }
    // æ²¡æœ‰æ‰¾åˆ°keyï¼Œboolå€¼è¿”å›falseï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªkeyåº”è¯¥æ”¾å…¥çš„æ¡¶çš„ä½ç½®
    return (bucket, false)
}
```
æˆ‘ä»¬åœ¨ä»£ç ä¸­çœ‹åˆ°ï¼Œå¦‚æœå‘ç”Ÿäº†å“ˆå¸Œç¢°æ’ï¼Œä¼šè°ƒç”¨`hashTable.bucket(wrappedAfter: bucket)`ï¼Œæ¥å¯»æ‰¾ä¸‹ä¸ªå¯ä»¥å­˜æ”¾çš„æ¡¶ï¼Œçœ‹ä¸‹ä»–çš„å®ç°ï¼š
```swift
internal func bucket(wrappedAfter bucket: Bucket) -> Bucket {
    // The bucket is less than bucketCount, which is power of two less than
    // Int.max. Therefore adding 1 does not overflow.
    return Bucket(offset: (bucket.offset &+ 1) & bucketMask)
  }
```

æˆ‘ä»¬çœ‹åˆ°ï¼Œè·å–æ–°çš„`Bucket`å¹¶æ²¡æœ‰å¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œåªæ˜¯ç®€å•çš„åšäº†åŠ 1æ“ä½œã€‚è¿™ä¸ªå¾ˆæ˜æ˜¾æ˜¯å¼€æ”¾å®šå€æ³•ï¼Œè€Œä¸”æ˜¯çº¿æ€§æ¢æµ‹åºåˆ—ã€‚


# å†™æ—¶å¤åˆ¶

è¿™ä¸ªæ•°ç»„çš„åŸç†ä¸€æ ·ï¼Œä¹Ÿè°ƒç”¨å¼•ç”¨è®¡æ•°çš„åˆ†æ
```swift
@inlinable
  internal mutating func setValue(_ value: __owned Value, forKey key: Key) {
#if _runtime(_ObjC)
    if !isNative {
      // Make sure we have space for an extra element.
      let cocoa = asCocoa
      self = .init(native: _NativeDictionary<Key, Value>(
        cocoa,
        capacity: cocoa.count + 1))
    }
#endif
// å†™æ—¶å¤åˆ¶çš„å¼•ç”¨åˆ¤æ–­
    let isUnique = self.isUniquelyReferenced()
    asNative.setValue(value, forKey: key, isUnique: isUnique)
  }
```

è¯¦ç»†çš„åœ¨[æ•°ç»„](https://juejin.cn/post/6931236309176418311)ç¯‡è®²è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å†è¯¦ç»†è®²è¿°äº†ã€‚


# ç»“è¯­

æœ¬æ–‡å·²ç»æŠŠ`Dictionary`åº•å±‚çš„å¤§è‡´åŸç†å·²ç»è®²å®Œäº†ï¼Œé™¤äº†`key`æ˜¯å¦‚ä½•åšå“ˆå¸Œçš„ï¼Œå› ä¸ºæºç ä¸­ç”¨çš„æ˜¯ç§æœ‰å±æ€§ï¼Œè¿™ä¸ªç§æœ‰å±æ€§ç”¨åˆ°äº†æˆ‘ä»¬ç»“æ„é‡Œçš„å±æ€§`seed`ï¼Œæ•´ä¸ªè®²è§£çš„è¯ï¼Œå†…å®¹å¤ªå¤šäº†ï¼Œä½ å¯ä»¥ç®€å•çš„ç†è§£æˆ`MD5`å°±è¡Œäº†ï¼Œå¹¶ä¸å½±å“å†…å®¹çš„ç†è§£ã€‚

è€æ ·å­ï¼Œæˆ‘æŠŠ`Dictionary`åº•å±‚ç¿»è¯‘æˆäº†`swift`ï¼Œå¹¶ä¸”æŠŠæ‰€æœ‰çš„`Key`ã€`Value`æ‰“å°äº†å‡ºæ¥ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸‹ï¼Œ[GitHubåœ°å€](https://github.com/harryphone/SwiftDictionaryLayout)ã€‚



# å‚è€ƒæ–‡çŒ®

* [å¼€æ”¾å®šå€æ³•â€”â€”çº¿æ€§æ¢æµ‹(Linear Probing)](https://www.cnblogs.com/hongshijie/p/9419387.html)
* [å“ˆå¸Œè¡¨ç®—æ³•é€šä¿—ç†è§£å’Œå®ç°](https://blog.csdn.net/u013752202/article/details/51104156)
* [å“ˆå¸Œè¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰åŸç†è¯¦è§£](https://blog.csdn.net/duan19920101/article/details/51579136/)
